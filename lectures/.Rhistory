bank <- data.frame(gender=c(rep("male", 24), rep("female", 24)),
decision=c(rep("promoted", 21), rep("not promoted", 3),
rep("promoted", 14), rep("not promoted", 10)))
head(bank)
bank %>% group_by(gender, decision) %>%
tally()
library(dplyr)
bank %>% group_by(gender, decision) %>%
tally()
?tally
bank %>% group_by(gender, decision) %>%
tally() %>% tbl()
bank %>% group_by(gender, decision) %>%
tally() %>% tbl_df()
library(tidyr)
bank %>% group_by(gender, decision) %>%
tally() %>%
spread(decision, n)
nasa
head(as.data.frame(nasa))
titanic <- as.tbl_cube(Titanic)
head(as.data.frame(titanic))
bank %>% group_by(gender, decision) %>%
tally() %>%
spread(decision, n)
bank %>% group_by(gender, decision) %>%
tally()
library(knitr)
?kable
bank %>% group_by(gender, decision) %>%
tally() %>%
mutate(all.gender=count(gender))
?count
summary(bank)
summarize(bank$gender)
summarise(bank$gender)
is.factor(bank$gender)
bank <- data.frame(gender=c(rep("male", 24), rep("female", 24)),
decision=c(rep("promoted", 21), rep("not promoted", 3),
rep("promoted", 14), rep("not promoted", 10)))
bank <- data.frame(gender=as.character(c(rep("male", 24), rep("female", 24))),
decision=c(rep("promoted", 21), rep("not promoted", 3),
rep("promoted", 14), rep("not promoted", 10)))
bank %>% group_by(gender, decision) %>%
tally() %>%
mutate(all.gender=count(as.character(gender)))
?kable
bank %>% group_by(gender, decision) %>%
tally() %>%
spread(decision, n) %>%
kable(format.args=list(width=100))
?table
bank.p <- bank %>% mutate(decision=sample(decision))
head(bank.p)
library(eechidna)
library(dplyr)
library(ggplot2)
glimpse(aec2013_2cp_electorate)
aec2013 <- aec2013_2cp_electorate %>%
filter(Elected == "Y")
sort(aec2013$Electorate)
sort(abs$Electorate)
sort(abs2011$Electorate)
abs2011$Electorate[abs2011$Electorate=="Mcmillan"] <- "McMillan"
abs2011$Electorate[abs2011$Electorate=="Mcpherson"] <- "McPherson"
save(abs2011, file="/Users/dicook/Rpackages/eechidna/abs2011.rda")
aec_abs <- merge(aec2013, abs2011, by = "Electorate")
glimpse(aec2013)
aec_abs %>% group_by(PartyAb) %>% tally()
unique(aec_abs$PartyAb)
aec_abs$PartyGp <- factor(aec_abs$PartyAb,
levels=c("ALP","LP","LNP","NP","IND","PUP","KAP","GRN","CLP"),
labels=c("ALP","Coalition","Coalition","Coalition",
"Other","Other","Other","Other","Coalition"))
aec_abs$PartyGp <- aec_abs$PartyAb
aec_abs$PartyGp[aec_abs$PartyGp %in% c("LP","LNP","NP","CLP")] <- "Coalition"
aec_abs$PartyGp <- aec_abs$PartyAb
aec_abs$PartyGp[aec_abs$PartyGp %in% c("LP","LNP","NP","CLP")] <- "Coalition"
aec_abs$PartyGp[aec_abs$PartyGp %in% c("IND","PUP","KAP","GRN")] <- "Other"
table(aec_abs$PartyGp)
ggplot(data=aec_abs, aes(x=Population)) + geom_dotplot() +
facet_wrap(~PartyGp)
ggplot(data=aec_abs, aes(x=Population)) + geom_dotplot() +
facet_wrap(~PartyGp, ncol=1)
ggplot(data=aec_abs, aes(x=Population)) + geom_dotplot() +
facet_wrap(~PartyGp, ncol = 1, scales = "free_y")
ggplot(data=aec_abs, aes(x=Population)) + geom_dotplot(binwidth=10000) +
facet_wrap(~PartyGp, ncol = 1, scales = "free_y")
ggplot(data=aec_abs, aes(x=Population)) + geom_dotplot(binwidth=5000) +
facet_wrap(~PartyGp, ncol = 1, scales = "free_y")
?stat_bindot
?geom_dotplot
ggplot(data=aec_abs, aes(x=Population)) + geom_dotplot(binwidth=7500) +
facet_wrap(~PartyGp, ncol = 1, scales = "free_y")
ggplot(data=aec_abs, aes(x=Population)) + geom_dotplot(binwidth=4000) +
facet_wrap(~PartyGp, ncol = 1, scales = "free_y")
ggplot(data=aec_abs, aes(x=Population)) + geom_dotplot(binwidth=3000) +
facet_wrap(~PartyGp, ncol = 1) + ylab("")
ggplot(data=aec_abs, aes(x=Population)) + geom_dotplot(binwidth=2500) +
facet_wrap(~PartyGp, ncol = 1) + ylab("")
ggplot(data=aec_abs, aes(x=Population)) + geom_dotplot(binwidth=2900) +
facet_wrap(~PartyGp, ncol = 1) + ylab("")
aec_abs_means <- aec_abs %>% filter(PartyGp != "Other") %>%
group_by(PartyGp) %>%
summarise(m = mean(Population, na.rm=T), s = sd(Population, na.rm=T))
aec_abs_means
149245.0/139536.7
139536.7/149245.0
mad <- function(df) {
df_means <- df %>% group_by(PartyGp) %>%
summarise(m = mean(Population, na.rm=T))
return(d = abs(df_means$m[1] - df_means$m[2]))
}
aec_abs_sub <- aec_abs %>% filter(PartyGp != "Other")
mad(aec_abs_sub)
library(purrr)
?map
aec_abs_shuffle <-1:100 %>% map(~ mad(aec_abs_sub))
aec_abs_shuffle
aec_abs_shuffle <-1:100 %>% map_df(~ mad(aec_abs_sub))
aec_abs_shuffle <-1:100 %>% map_dbl(~ mad(aec_abs_sub))
aec_abs_shuffle
is.data.frame(aec_abs_shuffle)
mad <- function(df, shuffle=TRUE) {
if (shuffle)
df$PartyGp <- sample(df$PartyGp)
df_means <- df %>% group_by(PartyGp) %>%
summarise(m = mean(Population, na.rm=T))
return(d = abs(df_means$m[1] - df_means$m[2]))
}
aec_abs_sub <- aec_abs %>% filter(PartyGp != "Other")
aec_abs_meandif <- mad(aec_abs_sub, shuffle=FALSE)
aec_abs_shuffle <-1:100 %>% map_dbl(~ mad(aec_abs_sub))
aec_abs_shuffle <- data.frame(d=aec_abs_shuffle, y=1:100)
ggplot(data=aec_abs_shuffle, aes(x=d)) + geom_dotplot() +
abline(xintercept=aec_abs_meandif, colour="red")
ggplot(data=aec_abs_shuffle, aes(x=d)) + geom_dotplot() +
geom_abline(xintercept=aec_abs_meandif, colour="red")
ggplot(data=aec_abs_shuffle, aes(x=d)) + geom_dotplot() +
geom_vline(xintercept=aec_abs_meandif, colour="red")
install.packages("eechidna")
